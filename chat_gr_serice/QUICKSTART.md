# 快速开始指南

## 5分钟快速上手

### 步骤1: 安装依赖

```bash
pip install -r requirements.txt
```

### 步骤2: 运行测试（可选）

验证所有模块正常工作：

```bash
python test_app.py
```

预期输出：
```
🎉 所有测试通过！
```

### 步骤3: 启动应用

```bash
# 方式1: 使用启动脚本
./start.sh

# 方式2: 直接运行
python app.py
```

### 步骤4: 访问应用

打开浏览器访问：`http://localhost:7860` 或 `http://0.0.0.0:7860`

### 步骤5: 开始对话

1. 在输入框输入问题，例如：**"帮我分析最近一周的用户行为数据"**
2. 点击"发送"按钮
3. 等待工作流处理（约2秒）
4. 查看助手回复和参考信息

## 测试工作流中断场景

1. 输入：**"分析销售趋势"**
   - 系统可能返回需要补充信息
2. 补充输入：**"重点关注产品A和产品B"**
   - 系统重启工作流
3. 查看最终结果和可视化链接

## 界面功能说明

### 主要区域

- **对话历史**: 显示所有对话消息
- **输入框**: 输入您的问题
- **发送按钮**: 提交输入

### 控制按钮

- **发送**: 提交用户输入
- **清空对话**: 清除当前对话历史
- **新建会话**: 创建新的会话
- **刷新状态**: 更新界面显示最新状态

### 信息面板

- **参考信息**: 显示可视化图表链接
- **会话信息**: 显示当前会话ID和状态
- **工作流状态**: 显示工作流运行状态

## 常见使用场景

### 场景1: 数据分析请求

```
您: 帮我分析最近一个月的销售数据
系统: [处理中...]
系统: 分析完成！数据显示过去一个月增长了25%...
参考: [可视化图表链接]
```

### 场景2: 需要补充信息

```
您: 分析用户行为
系统: 需要更多信息：请提供您想分析的数据范围和时间周期
您: 最近一周，移动端用户
系统: 分析完成！移动端用户活跃度提升30%...
参考: [可视化图表链接]
```

### 场景3: 处理失败

```
您: 执行复杂分析
系统: [处理中...]
系统: 处理失败：系统内部错误，请稍后重试
```

## 模拟数据说明

当前使用模拟的工作流服务（`workflow_mock.py`），其行为：

- **run_1, run_4, run_7...**: 成功完成
- **run_2, run_5, run_8...**: 需要中断
- **run_3, run_6, run_9...**: 处理失败

## 下一步

### 集成实际工作流服务

1. 阅读 `INTEGRATION_GUIDE.md` 了解如何集成
2. 替换 `workflow_mock.py` 中的模拟函数
3. 运行测试验证集成

### 配置调整

编辑 `config.py` 调整配置：

```python
# 修改端口
GRADIO_SERVER_PORT = 8080

# 增加并发数
MAX_ASYNC_WORKERS = 20

# 调整会话超时
SESSION_MAX_AGE_HOURS = 48
```

### 生产部署

参考 `README.md` 中的部署建议

## 问题排查

### 问题: 端口被占用

```bash
# 查找占用端口的进程
lsof -i :7860
# 杀死进程
kill -9 <PID>
```

### 问题: 依赖安装失败

```bash
# 使用国内镜像源
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### 问题: 应用无法启动

1. 检查Python版本（需要3.7+）
2. 确认所有依赖已安装
3. 查看错误日志

### 问题: 工作流无响应

1. 点击"刷新状态"按钮
2. 查看控制台日志
3. 检查工作流服务连接

## 获取帮助

- 查看完整文档：`README.md`
- 集成指南：`INTEGRATION_GUIDE.md`
- 项目总览：`PROJECT_OVERVIEW.md`

## 示例对话

### 示例1: 成功分析

```
👤 帮我分析最近一个月的销售数据

[2秒后]

🤖 分析完成！根据您的需求，我已生成详细的分析报告。
数据显示过去一个月增长了25%，主要来自于
产品A和产品B的贡献。

📊 参考信息:
   可视化链接: https://example.com/chart/run_1_xxx
```

### 示例2: 中断处理

```
👤 分析用户行为数据

[2秒后]

🤖 需要更多信息：请提供您想分析的数据范围和时间周期

👤 最近一周，移动端用户

[2秒后]

🤖 分析完成！根据您的需求，我已生成详细的分析报告...
📊 参考信息: 可视化链接
```

### 示例3: 失败处理

```
👤 执行复杂的数据挖掘

[2秒后]

🤖 处理失败：系统内部错误，请稍后重试
```

## 提示

- 💡 工作流处理需要时间，请耐心等待
- 💡 可以点击"刷新状态"查看最新进度
- 💡 中断后需要补充信息才能继续
- 💡 可视化链接在参考信息面板显示
- 💡 可以创建多个会话进行不同对话

享受使用！🎉
